<!DOCTYPE html>
<html lang="pt-BR" class="">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>ETL Faturas Itaú v1 - Documentação Técnica</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<script>
		tailwind.config = {
			darkMode: 'class',
			theme: {
				extend: {
					colors: {
						cyber: {
							black: '#0a0a0a',
							dark: '#111111',
							gray: '#1f1f1f',
							slate: '#2d2d2d',
							primary: '#00f0ff', // Neon Cyan (Dark Mode)
							primaryDark: '#0891b2', // Cyan-600 (Light Mode)
							secondary: '#7000ff', // Purple
							accent: '#ff003c', // Red/Pink
							success: '#00ff9f',
						}
					},
					fontFamily: {
						mono: ['JetBrains Mono', 'monospace'],
						sans: ['Inter', 'sans-serif']
					},
					boxShadow: {
						'neon-blue': '0 0 10px rgba(0, 240, 255, 0.5), 0 0 20px rgba(0, 240, 255, 0.3)',
						'neon-purple': '0 0 10px rgba(112, 0, 255, 0.5), 0 0 20px rgba(112, 0, 255, 0.3)',
						'light-card': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
					}
				}
			}
		}
	</script>
	<link
		href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600&display=swap"
		rel="stylesheet">
	<style>
		/* Base Styles */
		body {
			font-family: 'Inter', sans-serif;
			transition: background-color 0.3s, color 0.3s;
		}

		/* Dark Mode Styles */
		html.dark body {
			background-color: #050505;
			background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
			background-size: 30px 30px;
			color: #e5e5e5;
		}

		/* Light Mode Styles */
		html:not(.dark) body {
			background-color: #f3f4f6;
			background-image: linear-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 0, 0, 0.03) 1px, transparent 1px);
			background-size: 30px 30px;
			color: #1f2937;
		}

		/* Adaptive Card */
		.adaptive-card {
			transition: background 0.3s, border 0.3s, box-shadow 0.3s;
			backdrop-filter: blur(12px);
		}

		html.dark .adaptive-card {
			background: rgba(26, 26, 26, 0.6);
			border: 1px solid rgba(255, 255, 255, 0.1);
			box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
		}

		html:not(.dark) .adaptive-card {
			background: rgba(255, 255, 255, 0.9);
			border: 1px solid rgba(0, 0, 0, 0.05);
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
		}

		/* Nav Bar */
		html.dark nav {
			background: rgba(10, 10, 10, 0.8);
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		}

		html:not(.dark) nav {
			background: rgba(255, 255, 255, 0.9);
			border-bottom: 1px solid rgba(0, 0, 0, 0.1);
		}

		.scrollbar-hide::-webkit-scrollbar {
			display: none;
		}
	</style>
</head>

<body class="min-h-screen overflow-x-hidden">

	<!-- Theme Toggle (Floating) -->
	<button id="themeToggle"
		class="fixed top-20 right-6 z-50 p-2 rounded-full bg-white/90 dark:bg-cyber-black/90 border border-gray-200 dark:border-cyber-gray shadow-lg dark:shadow-neon-blue text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-all focus:outline-none backdrop-blur-md">
		<!-- Sun Icon (for Dark Mode) -->
		<svg id="iconSun" class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
				d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
			</path>
		</svg>
		<!-- Moon Icon (for Light Mode) -->
		<svg id="iconMoon" class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
				d="M20.354 24.043A9 9 0 0021 12a9 9 0 10-6.156 6.156 8.97 8.97 0 00-1.69 5.888z" transform="rotate(-25 12 12)">
			</path>
			<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
				d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
		</svg>
	</button>

	<!-- Navigation -->
	<nav class="fixed top-0 w-full z-50 backdrop-blur-md">
		<div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
			<div class="flex items-center space-x-3">
				<div class="w-3 h-3 bg-cyber-primaryDark dark:bg-cyber-primary rounded-full shadow-[0_0_10px_#00f3ff]"></div>
				<h1 class="text-xl font-mono font-bold tracking-wider text-gray-900 dark:text-white">
					ETL FATURAS <span class="text-cyber-primaryDark dark:text-cyber-primary">ITAÚ</span> <span
						class="text-xs px-1.5 py-0.5 rounded bg-cyber-primaryDark/10 dark:bg-cyber-primary/20 text-cyber-primaryDark dark:text-cyber-primary border border-cyber-primaryDark/20 dark:border-cyber-primary/30">v1</span>
				</h1>
			</div>
			<a href="/"
				class="text-sm font-mono text-gray-500 dark:text-gray-400 hover:text-cyber-primaryDark dark:hover:text-cyber-primary transition-colors flex items-center gap-2">
				<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
				</svg>
				VOLTAR PARA APP
			</a>
		</div>
	</nav>

	<!-- Main Content -->
	<main class="pt-24 pb-20 px-6 max-w-5xl mx-auto">

		<!-- Hero Section -->
		<div class="mb-16 text-center">
			<h2
				class="text-4xl md:text-5xl font-bold mb-6 text-transparent bg-clip-text bg-gradient-to-r from-gray-900 via-cyber-primaryDark to-purple-600 dark:from-white dark:via-cyber-primary dark:to-cyber-purple pb-2">
				Arquitetura de Extração
			</h2>
		</div>



		<!-- Process Flow -->
		<div class="grid md:grid-cols-3 gap-6 mb-16">
			<!-- Step 1 -->
			<div
				class="adaptive-card p-6 rounded-xl hover:border-cyber-primaryDark dark:hover:border-cyber-primary/50 transition-all duration-300 group">
				<div
					class="w-12 h-12 rounded-lg bg-cyber-primaryDark/10 dark:bg-cyber-primary/10 flex items-center justify-center mb-4 group-hover:bg-cyber-primaryDark/20 dark:group-hover:bg-cyber-primary/20 transition-colors">
					<svg class="w-6 h-6 text-cyber-primaryDark dark:text-cyber-primary" fill="none" stroke="currentColor"
						viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
							d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
					</svg>
				</div>
				<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">1. Ingestão & Leitura</h3>
				<p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">
					O sistema utiliza <code class="text-cyber-accent bg-cyber-accent/10 px-1 rounded">pdfplumber</code> para
					extrair o texto cru, preservando coordenadas espaciais. Isso permite ler o arquivo como dados vetoriais,
					garantindo máxima fidelidade.
				</p>
			</div>

			<!-- Step 2 -->
			<div class="adaptive-card p-6 rounded-xl hover:border-cyber-secondary/50 transition-all duration-300 group">
				<div
					class="w-12 h-12 rounded-lg bg-cyber-secondary/10 flex items-center justify-center mb-4 group-hover:bg-cyber-secondary/20 transition-colors">
					<svg class="w-6 h-6 text-cyber-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
							d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" />
					</svg>
				</div>
				<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">2. Processamento Híbrido</h3>
				<p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">
					O motor ETL decide dinamicamente entre o parser <strong>Nativo</strong> (regras estritas para Itaú) e o
					<strong>Genérico</strong> (heurística adaptativa). Se o modelo nativo falhar, a inteligência de padrões
					assume.
				</p>
			</div>

			<!-- Step 3 -->
			<div class="adaptive-card p-6 rounded-xl hover:border-yellow-500/50 transition-all duration-300 group">
				<div
					class="w-12 h-12 rounded-lg bg-yellow-500/10 flex items-center justify-center mb-4 group-hover:bg-yellow-500/20 transition-colors">
					<svg class="w-6 h-6 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor"
						viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
							d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
					</svg>
				</div>
				<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">3. Validação Cruzada</h3>
				<p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed">
					A acurácia é garantida matematicamente: o sistema compara a soma das transações extraídas com o "Total da
					Fatura" declarado no cabeçalho. Discrepâncias > R$ 0,01 disparam alertas.
				</p>
			</div>
		</div>

		<!-- Implementation Note (New) -->
		<div class="adaptive-card p-6 rounded-xl mb-12 border-l-4 border-cyber-secondary">
			<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2">
				<svg class="w-6 h-6 text-cyber-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
						d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
				</svg>
				Implementação & Arquitetura
			</h3>
			<div class="space-y-4 text-gray-600 dark:text-gray-400">
				<p>
					Atualmente, este ETL (Extract, Transform, Load) é executado em <strong>Python</strong>, aproveitando
					bibliotecas robustas como <code class="bg-gray-200 dark:bg-gray-800 px-1 rounded text-sm">pandas</code> e
					<code class="bg-gray-200 dark:bg-gray-800 px-1 rounded text-sm">pdfplumber</code>. No entanto, a arquitetura
					foi desenhada para ser <strong>agnóstica de linguagem</strong>.
				</p>
				<p>
					A lógica de extração é baseada em padrões (Regex e coordenadas espaciais), o que significa que pode ser
					portada para <strong>Node.js, Go, Rust ou Java</strong> sem perda de funcionalidade.
				</p>
				<div class="bg-gray-100 dark:bg-black/40 p-4 rounded-lg border border-gray-200 dark:border-white/10 mt-4">
					<h4 class="text-sm font-bold text-gray-900 dark:text-white mb-2 uppercase tracking-wider">Microserviço "Bate e
						Pronto"</h4>
					<p class="text-sm">
						O sistema já opera via API REST (FastAPI). Isso permite que ele seja destacado deste dashboard e rode como
						um container isolado (Docker), recebendo PDFs via POST e retornando JSON estruturado. Basta apontar seu
						endpoint e ele está pronto para produção.
					</p>
				</div>
			</div>
		</div>

		<div
			class="w-full h-px bg-gray-200 dark:bg-gradient-to-r dark:from-transparent dark:via-cyber-primary dark:to-transparent mb-16">
		</div>

		<!-- Deep Dive Sections -->
		<div class="space-y-12">

			<!-- Flexibility -->
			<div class="grid md:grid-cols-2 gap-12 items-center">
				<div>
					<h3 class="text-2xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-3">
						<span class="text-cyber-primaryDark dark:text-cyber-primary">#</span> Flexibilidade e Adaptação
					</h3>
					<p class="text-gray-600 dark:text-gray-400 mb-4 leading-relaxed">
						Faturas bancárias mudam de layout constantemente. O ETL foi desenhado para ser resiliente a essas mudanças.
					</p>
					<ul class="space-y-3">
						<li class="flex items-start gap-3 text-gray-700 dark:text-gray-300 text-sm">
							<span class="text-cyber-secondary mt-1">▹</span>
							<span><strong>Padrões Regex:</strong> Em vez de coordenadas fixas, buscamos padrões textuais como datas
								(dd/mm) e valores monetários.</span>
						</li>
						<li class="flex items-start gap-3 text-gray-700 dark:text-gray-300 text-sm">
							<span class="text-cyber-secondary mt-1">▹</span>
							<span><strong>Fallback Inteligente:</strong> O sistema tenta primeiro a lógica específica do Itaú. Se não
								encontrar os marcadores esperados, ativa o modo "Genérico".</span>
						</li>
					</ul>
				</div>
				<div
					class="adaptive-card p-6 rounded-xl font-mono text-xs text-gray-600 dark:text-gray-400 border border-gray-200 dark:border-white/10 bg-gray-50 dark:bg-black/40">
					<div class="flex gap-2 mb-4">
						<div class="w-3 h-3 rounded-full bg-red-500/20 border border-red-500/50"></div>
						<div class="w-3 h-3 rounded-full bg-yellow-500/20 border border-yellow-500/50"></div>
						<div class="w-3 h-3 rounded-full bg-green-500/20 border border-green-500/50"></div>
					</div>
					<p class="text-green-600 dark:text-green-400 mb-2"># Exemplo de Padrão Genérico</p>
					<p class="opacity-50">// O sistema entende variações:</p>
					<p class="text-cyber-primaryDark dark:text-cyber-primary my-1">15/04 UBER DO BRASIL 24,90</p>
					<p class="text-cyber-accent my-1">NETFLIX.COM 15/04 55,90</p>
					<br>
					<p class="opacity-50">// Regex Simplificado:</p>
					<p class="text-orange-600 dark:text-orange-300">r'(\d{2}/\d{2})\s+(.+?)\s+([\d,]+)'</p>
				</div>
			</div>

		</div>

		<!-- Footer Note -->
		<div class="mt-20 text-center border-t border-gray-200 dark:border-white/10 pt-8">
			<p class="text-xs text-gray-500 font-mono">
				ETL FATURAS ITAÚ v1 // CORE MODULE
			</p>
		</div>

	</main>

	<script>
		// Theme Logic
		const themeToggleBtn = document.getElementById('themeToggle');
		const html = document.documentElement;
		const iconSun = document.getElementById('iconSun');
		const iconMoon = document.getElementById('iconMoon');

		// Check local storage or system preference
		if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
			html.classList.add('dark');
		} else {
			html.classList.remove('dark');
		}

		themeToggleBtn.addEventListener('click', () => {
			html.classList.toggle('dark');
			if (html.classList.contains('dark')) {
				localStorage.theme = 'dark';
			} else {
				localStorage.theme = 'light';
			}
		});
	</script>

</body>

</html>